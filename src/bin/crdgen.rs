//! CRD Generator
//!
//! Generates YAML manifests for Berg operator CRDs.
//! Run with: cargo run --bin crdgen

use berg_operator::crds::{Challenge, ChallengeInstance, ChallengeInstanceClass};
use kube::CustomResourceExt;

fn main() {
    // Generate CRDs as YAML documents separated by "---"
    println!("# Berg Operator CRDs");
    println!("# Generated by crdgen");
    println!("---");

    // Challenge CRD
    let challenge_crd =
        serde_yaml::to_string(&Challenge::crd()).expect("Failed to serialize Challenge CRD");
    println!("{}", challenge_crd.trim());
    println!("---");

    // ChallengeInstance CRD
    let instance_crd = serde_yaml::to_string(&ChallengeInstance::crd())
        .expect("Failed to serialize ChallengeInstance CRD");
    println!("{}", instance_crd.trim());
    println!("---");

    // ChallengeInstanceClass CRD
    let class_crd = serde_yaml::to_string(&ChallengeInstanceClass::crd())
        .expect("Failed to serialize ChallengeInstanceClass CRD");
    println!("{}", class_crd.trim());
}
